<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KAIRO'S PHONE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
        
        * { box-sizing: border-box; user-select: none; }
        body { 
            margin: 0; padding: 0; 
            background: #111; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; font-family: 'Inter', sans-serif; 
        }

        /* í° í”„ë ˆì„ */
        .phone-frame {
            width: 360px; height: 740px;
            background: #000;
            border-radius: 45px;
            border: 10px solid #222;
            box-shadow: 0 0 60px rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        /* ë…¸ì¹˜ & ìƒë‹¨ë°” */
        .notch {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 120px; height: 25px; background: #000;
            border-bottom-left-radius: 18px; border-bottom-right-radius: 18px;
            z-index: 100;
        }
        .status-bar {
            padding: 12px 25px; display: flex; justify-content: space-between;
            font-size: 13px; color: #fff; font-weight: 600; position: relative; z-index: 90;
        }

        /* --- 2. í™ˆ í™”ë©´ (ì´ê²Œ ë’¤ì— ê¹”ë¦¼) --- */
        .home-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            /* ì†Œì¥ë‹˜ì´ ì£¼ì‹  ë¦¬í”Œë¦¬ ì‚¬ì§„ ì ìš© (ì•±ì´ ì˜ ë³´ì´ê²Œ ì‚´ì§ ì–´ë‘¡ê²Œ) */
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6)), url('https://cdn.caveduck.io/cdn-cgi/image/anim=true,dpr=1.5,f=auto,fit=crop,g=top,w=400/charim/7dde8bb3-492e-413f-8be7-45ad5508d81e?v=61680e');
            background-size: cover;
            background-position: center;
            display: flex; flex-direction: column; padding-top: 60px;
            z-index: 10;
        }

        /* --- 1. ì ê¸ˆ í™”ë©´ (í™ˆ í™”ë©´ ìœ„ë¥¼ ë®ìœ¼ë©´ì„œ ë¿Œì˜‡ê²Œ ë§Œë“¦) --- */
        .lock-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.2); /* ë°˜íˆ¬ëª… ê²€ì€ í•„í„° */
            backdrop-filter: blur(15px); /* â˜… í•µì‹¬: ë’¤ì— ìˆëŠ” ì‚¬ì§„ì„ ê°•í•˜ê²Œ íë¦¬ê²Œ ë§Œë“¦ */
            -webkit-backdrop-filter: blur(15px);
            display: flex; flex-direction: column; align-items: center; padding-top: 80px;
            color: #fff;
            transition: transform 0.4s ease-in-out;
            z-index: 50;
        }
        .lock-time { font-size: 72px; font-weight: 200; letter-spacing: -2px; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .lock-date { font-size: 18px; margin-top: -10px; font-weight: 400; margin-bottom: 40px; text-shadow: 0 1px 5px rgba(0,0,0,0.3); }

        .passcode-dots { display: flex; gap: 15px; margin-bottom: 40px; }
        .dot { width: 12px; height: 12px; border: 1px solid #fff; border-radius: 50%; transition: 0.2s; box-shadow: 0 0 5px rgba(0,0,0,0.3); }
        .dot.filled { background: #fff; }

        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px 30px; width: 80%; }
        .key { width: 70px; height: 70px; border-radius: 50%; background: rgba(255,255,255,0.15); display: flex; justify-content: center; align-items: center; font-size: 24px; font-weight: 400; cursor: pointer; transition: 0.2s; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }
        .key:active { background: rgba(255,255,255,0.4); }
        .key:hover { background: rgba(255,255,255,0.2); }

        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        /* ìœ„ì ¯ ë° ì•„ì´ì½˜ */
        .widget-area { padding: 20px; }
        .d-day-widget {
            background: linear-gradient(135deg, rgba(255,154,158,0.8), rgba(254,207,239,0.8));
            backdrop-filter: blur(5px);
            border-radius: 20px; padding: 25px; color: #fff;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        .dd-title { font-size: 13px; font-weight: 600; opacity: 0.9; }
        .dd-count { font-size: 36px; font-weight: 800; margin: 5px 0; }
        .dd-sub { font-size: 12px; text-align: right; opacity: 0.8; font-weight: 500;}

        .app-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px 10px;
            padding: 20px; margin-top: auto; margin-bottom: 30px;
        }
        .app-icon { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; transition: 0.2s; }
        .app-icon:active { transform: scale(0.9); }
        .icon-img {
            width: 60px; height: 60px; border-radius: 14px;
            display: flex; justify-content: center; align-items: center;
            font-size: 26px; color: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .app-name { font-size: 11px; color: #fff; font-weight: 500; text-shadow: 0 1px 3px rgba(0,0,0,0.8); }

        .ic-gal { background: #4facfe; } 
        .ic-memo { background: #ffd166; } 
        .ic-search { background: #06d6a0; } 
        .ic-call { background: #ef476f; } 
        .ic-rec { background: #118ab2; } 
        .ic-cal { background: #9b5de5; } 

        /* --- 3. ì•± ì‹¤í–‰ í™”ë©´ --- */
        .app-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 20;
            transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; flex-direction: column;
        }
        .app-screen.open { transform: translateY(0); }
        
        .app-header {
            padding: 50px 20px 15px; font-size: 18px; font-weight: 700;
            border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.98); color: #333;
        }
        .close-btn { font-size: 14px; color: #007aff; cursor: pointer; font-weight: 600; }
        .app-content { flex: 1; overflow-y: auto; padding: 20px; background: #fafafa; }

        .add-btn { font-size: 24px; color: #007aff; cursor: pointer; margin-right: 15px; }

        /* ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ */
        .cal-list { display: flex; flex-direction: column; gap: 10px; padding-bottom: 30px; }
        .cal-item { 
            background: #fff; padding: 15px 20px; border-radius: 12px; 
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03); border: 1px solid #eee;
            position: relative; overflow: hidden;
        }
        
        .cal-item.custom-event { border-left: 4px solid #007aff; }
        .cal-item.milestone { border: 1px solid #FF9A9E; background: #fff5f5; }
        .cal-item.ripley-bd { border: 1px solid #9b5de5; background: #f3e5f5; }
        .cal-item.ripley-bd::before { content: 'â™¥'; position: absolute; top: -5px; left: -5px; font-size: 40px; color: rgba(155, 93, 229, 0.1); }
        .cal-item.kairo-bd { background: #f9f9f9; opacity: 0.7; }
        .cal-item.love-day { background: #fff0f6; border-color: #ffadd2; }

        .cal-title { font-size: 15px; font-weight: 700; color: #333; display: flex; align-items: center; gap: 5px; }
        .cal-date { font-size: 13px; color: #666; margin-top: 2px; }
        .cal-dday { font-size: 12px; font-weight: bold; color: #9b5de5; background: #fff; padding: 4px 8px; border-radius: 6px; border: 1px solid #eee; }
        .cal-dday.past { background: #eee; color: #aaa; text-decoration: line-through; border: none; }
        .cal-dday.today { background: #FF9A9E; color: #fff; border: none; }

        /* ê°¤ëŸ¬ë¦¬/ë©”ëª¨/ê²€ìƒ‰/ë…¹ìŒ ìŠ¤íƒ€ì¼ */
        .gallery-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .photo { width: 100%; aspect-ratio: 1/1; background: #eee; border-radius: 12px; overflow: hidden; position: relative; margin-bottom: 0; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .photo img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
        .photo:hover img { transform: scale(1.05); }
        .photo-caption { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(transparent, rgba(0,0,0,0.7)); color: #fff; font-size: 11px; padding: 10px 10px 5px; }

        .memo-item { background: #fff; padding: 20px; border-radius: 16px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); border: 1px solid #f0f0f0; }
        .memo-date { font-size: 11px; color: #aaa; margin-bottom: 8px; font-weight: 600; }
        .memo-text { font-size: 14px; line-height: 1.6; color: #444; }

        .search-item { display: flex; align-items: center; gap: 15px; padding: 15px 0; border-bottom: 1px solid #eee; }
        .search-icon { color: #aaa; font-size: 14px; }
        .search-text { font-size: 14px; color: #333; flex: 1; }
        .search-date { font-size: 11px; color: #bbb; }

        .rec-item { background: #fff; padding: 15px; border-radius: 12px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .play-icon { width: 36px; height: 36px; background: #f0f0f0; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: #ef476f; font-size: 14px; }

        .home-indicator { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); width: 130px; height: 5px; background: #fff; border-radius: 10px; opacity: 0.6; z-index: 200; }

        /* ëª¨ë‹¬ë“¤ (ê³µí†µ ìŠ¤íƒ€ì¼) */
        .modal-overlay { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); z-index: 200; display: none; 
            justify-content: center; align-items: center; flex-direction: column; 
        }
        .modal-title { color:#fff; margin-bottom:15px; font-weight:bold; }
        .modal-input { padding: 10px; font-size: 16px; border-radius: 8px; border: none; margin-bottom: 10px; width: 80%; }
        .modal-btn { padding: 10px 20px; background: #007aff; color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; width: 80%; margin-bottom: 5px; }
        .modal-btn.cancel { background: #333; }

        /* ì‚¬ì§„ í¬ê²Œ ë³´ê¸° ëª¨ë‹¬ */
        .image-modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 300; display: none; flex-direction: column; justify-content: center; align-items: center; }
        .full-image { max-width: 100%; max-height: 70%; object-fit: contain; }
        .image-caption { color: #fff; margin-top: 20px; font-size: 14px; padding: 0 20px; text-align: center; }
        .image-actions { margin-top: 30px; display: flex; gap: 20px; }
        .action-btn { background: rgba(255,255,255,0.2); color: #fff; border: 1px solid rgba(255,255,255,0.3); padding: 8px 16px; border-radius: 20px; font-size: 13px; cursor: pointer; }

    </style>
</head>
<body>

    <div class="phone-frame">
        <div class="notch"></div>
        <div class="status-bar">
            <span id="top-clock">14:02</span>
            <span>5G</span>
        </div>

        <div class="lock-screen" id="lockScreen">
            <div class="lock-time" id="lock-clock">14:02</div>
            <div class="lock-date" id="lock-date">2ì›” 14ì¼ í† ìš”ì¼</div>
            <div class="passcode-dots"><div class="dot" id="d1"></div><div class="dot" id="d2"></div><div class="dot" id="d3"></div><div class="dot" id="d4"></div></div>
            <div class="keypad">
                <div class="key" onclick="pressKey(1)">1</div><div class="key" onclick="pressKey(2)">2</div><div class="key" onclick="pressKey(3)">3</div>
                <div class="key" onclick="pressKey(4)">4</div><div class="key" onclick="pressKey(5)">5</div><div class="key" onclick="pressKey(6)">6</div>
                <div class="key" onclick="pressKey(7)">7</div><div class="key" onclick="pressKey(8)">8</div><div class="key" onclick="pressKey(9)">9</div>
                <div class="key" style="background:transparent;"></div><div class="key" onclick="pressKey(0)">0</div><div class="key" onclick="deleteKey()">â†</div>
            </div>
        </div>

        <div class="home-screen">
            <div class="widget-area">
                <div class="d-day-widget" onclick="openDateModal()">
                    <div class="dd-title">â™¥ï¸</div>
                    <div class="dd-count" id="dday-display">D + ???</div>
                    <div class="dd-sub">í„°ì¹˜í•´ì„œ ë‚ ì§œ ì„¤ì •í•˜ê¸°</div>
                </div>
            </div>
            <div class="app-grid">
                <div class="app-icon" onclick="openApp('gallery')"><div class="icon-img ic-gal">ğŸ–¼ï¸</div><div class="app-name">ì•¨ë²”</div></div>
                <div class="app-icon" onclick="openApp('memo')"><div class="icon-img ic-memo">ğŸ“’</div><div class="app-name">ì¼ê¸°ì¥</div></div>
                <div class="app-icon" onclick="openApp('calendar')"><div class="icon-img ic-cal">ğŸ“…</div><div class="app-name">ê¸°ë…ì¼</div></div>
                <div class="app-icon" onclick="openApp('search')"><div class="icon-img ic-search">ğŸŒ</div><div class="app-name">ì¸í„°ë„·</div></div>
                <div class="app-icon" onclick="openApp('record')"><div class="icon-img ic-rec">ğŸ™ï¸</div><div class="app-name">ë…¹ìŒ</div></div>
            </div>
        </div>

        <div class="app-screen" id="app-calendar">
            <div class="app-header">
                The Couple 
                <div style="display:flex; align-items:center;">
                    <span class="add-btn" onclick="openEventModal()">+</span>
                    <span class="close-btn" onclick="closeApp('calendar')">ë‹«ê¸°</span>
                </div>
            </div>
            <div class="app-content">
                <div style="font-size:12px; color:#999; margin-bottom:15px; text-align:center;">
                    ìš°ë¦¬ì˜ ì†Œì¤‘í•œ ë‚ ë“¤
                </div>
                <div class="cal-list" id="calendar-list">
                    </div>
            </div>
        </div>

        <div class="app-screen" id="app-gallery">
            <div class="app-header">
                ë‚˜ì˜ ì•¨ë²” 
                <div style="display:flex; align-items:center;">
                    <span class="add-btn" onclick="document.getElementById('photoInput').click()">+</span>
                    <span class="close-btn" onclick="closeApp('gallery')">ë‹«ê¸°</span>
                </div>
                <input type="file" id="photoInput" accept="image/*" style="display:none;" onchange="handleAddPhoto(this)">
            </div>
            <div class="app-content">
                <div style="font-size:12px; color:#999; margin-bottom:10px;">ì¦ê²¨ì°¾ëŠ” í•­ëª©</div>
                <div class="gallery-grid" id="gallery-container">
                    <div class="photo" onclick="openFullImage(this.querySelector('img').src, 'ê·¸ë…€ê°€ ì²˜ìŒ ì¤€ ì¢…ì´ê½ƒ')"><img src="https://source.unsplash.com/200x200/?hand,holding,flower" alt=""><div class="photo-caption">ê·¸ë…€ê°€ ì²˜ìŒ ì¤€ ì¢…ì´ê½ƒ</div></div>
                    <div class="photo" onclick="openFullImage(this.querySelector('img').src, 'ì°½ê°€ì— ì•‰ì€ ë’·ëª¨ìŠµ')"><img src="https://source.unsplash.com/200x200/?sunlight,window" alt=""><div class="photo-caption">ì°½ê°€ì— ì•‰ì€ ë’·ëª¨ìŠµ</div></div>
                    <div class="photo" onclick="openFullImage(this.querySelector('img').src, 'ë‚˜ë¥¼ ê·¸ë ¤ì¤€ ê·¸ë¦¼ (ê·€ì—½ë‹¤)')"><img src="https://source.unsplash.com/200x200/?sketch,drawing,pencil" alt=""><div class="photo-caption">ë‚˜ë¥¼ ê·¸ë ¤ì¤€ ê·¸ë¦¼ (ê·€ì—½ë‹¤)</div></div>
                    <div class="photo" onclick="openFullImage(this.querySelector('img').src, 'ì„¸ìƒì—ì„œ ì œì¼ í‰ì˜¨í•œ ì–¼êµ´')"><img src="https://source.unsplash.com/200x200/?sleeping,peaceful" alt=""><div class="photo-caption">ì„¸ìƒì—ì„œ ì œì¼ í‰ì˜¨í•œ ì–¼êµ´</div></div>
                </div>
            </div>
        </div>
        
        <div class="app-screen" id="app-memo">
            <div class="app-header">ë¹„ë°€ ì¼ê¸° <span class="close-btn" onclick="closeApp('memo')">ë‹«ê¸°</span></div>
            <div class="app-content">
                <div class="memo-item"><div class="memo-date">ì˜¤ëŠ˜ ìƒˆë²½ 02:00</div><div class="memo-text">ì•…ëª½ì„ ê¾¸ëŠ” ê²ƒ ê°™ì•„ì„œ ì†ì„ ì¡ì•„ì£¼ì—ˆë‹¤. ë–¨ë¦¼ì´ ë©ˆì·„ë‹¤. <br>ë‚´ ì†ì´ ì°¨ê°€ì›Œì„œ ê¹°ê¹Œ ë´ ê±±ì •í–ˆëŠ”ë°, ì˜¤íˆë ¤ ë” ê½‰ ì¥ê³  ì ë“¤ì—ˆë‹¤.<br>ì´ ì†ì„ ì˜ì›íˆ ë†“ì§€ ì•Šì„ ê²ƒì´ë‹¤.</div></div>
                <div class="memo-item"><div class="memo-date">ì–´ì œ</div><div class="memo-text">ì˜¤ëŠ˜ ë°°ì‹ì— ë‚˜ì˜¨ í‘¸ë”©ì„ ë³´ê³  ëˆˆì´ ë™ê·¸ë—ê²Œ ì»¤ì¡Œë‹¤. <br>ë‹¨ ê²ƒì„ ì¢‹ì•„í•˜ëŠ”êµ¬ë‚˜. ê¸°ì–µí•´ ë‘¬ì•¼ì§€.<br>ë‹¤ìŒì—” ëª°ë˜ ì´ˆì½œë¦¿ì„ ê°€ì ¸ë‹¤ ì¤„ê¹Œ? ê±¸ë¦¬ë©´ ì§•ê³„ì§€ë§Œ ìƒê´€ì—†ë‹¤.</div></div>
                <div class="memo-item"><div class="memo-date">2026. 02. 05</div><div class="memo-text">ë‚´ê°€ ì§€ì€ ì£„ë¥¼ ì”»ì„ ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì€ ë„ˆë¥¼ ì—¬ê¸°ì„œ ë°ë¦¬ê³  ë‚˜ê°€ëŠ” ê²ƒë¿ì´ë‹¤.<br>ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì¤˜. ì™„ë²½í•œ ê³„íšì„ ì„¸ìš°ê³  ìˆì–´.</div></div>
            </div>
        </div>
        
        <div class="app-screen" id="app-search">
            <div class="app-header">ê²€ìƒ‰ ê¸°ë¡ <span class="close-btn" onclick="closeApp('search')">ë‹«ê¸°</span></div>
            <div class="app-content">
                <div class="search-item"><span class="search-icon">ğŸ”</span><span class="search-text">ì•…ëª½ì„ ê¾¸ì§€ ì•Šê²Œ í•˜ëŠ” ì°¨(Tea)</span><span class="search-date">ë°©ê¸ˆ ì „</span></div>
                <div class="search-item"><span class="search-icon">ğŸ”</span><span class="search-text">ì—¬ì ë¨¸ë¦¬ ì•ˆ ì•„í”„ê²Œ ë¬¶ëŠ” ë²•</span><span class="search-date">1ì‹œê°„ ì „</span></div>
                <div class="search-item"><span class="search-icon">ğŸ”</span><span class="search-text">í–‡ë¹›ì„ ëª» ë³´ë©´ ìƒê¸°ëŠ” ë³‘</span><span class="search-date">ì–´ì œ</span></div>
                <div class="search-item"><span class="search-icon">ğŸ”</span><span class="search-text">ìˆ˜ì œ ì´ˆì½œë¦¿ ë§Œë“œëŠ” ë²• (ì´ˆë³´)</span><span class="search-date">2ì¼ ì „</span></div>
                <div class="search-item"><span class="search-icon">ğŸ”</span><span class="search-text">ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì„ ì§€í‚¤ëŠ” ë²•</span><span class="search-date">3ì¼ ì „</span></div>
            </div>
        </div>
        
        <div class="app-screen" id="app-record">
            <div class="app-header">ìŒì„± ë©”ëª¨ <span class="close-btn" onclick="closeApp('record')">ë‹«ê¸°</span></div>
            <div class="app-content">
                <div class="rec-item"><div class="play-icon">â–¶</div><div><div style="font-weight:bold;">ì²˜ìŒìœ¼ë¡œ ì›ƒì€ ë‚ .mp3</div><div style="font-size:12px; color:#888;">2026.02.14 | 00:15</div></div></div>
                <div class="rec-item"><div class="play-icon">â–¶</div><div><div style="font-weight:bold;">ìì¥ê°€ ì—°ìŠµ (ë§í•¨).mp3</div><div style="font-size:12px; color:#888;">2026.02.10 | 03:40</div></div></div>
                <div class="rec-item"><div class="play-icon">â–¶</div><div><div style="font-weight:bold;">ìƒˆ ì†Œë¦¬ (ë“¤ë ¤ì£¼ë ¤ê³ ).mp3</div><div style="font-size:12px; color:#888;">2026.02.01 | 05:20</div></div></div>
            </div>
        </div>

        <div class="home-indicator"></div>

        <div class="modal-overlay" id="dateModal">
            <div class="modal-title">ì²˜ìŒ ë§Œë‚œ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”</div>
            <input type="date" id="input-date" class="modal-input">
            <button class="modal-btn" onclick="saveDDay()">ì„¤ì • ì €ì¥</button>
            <button class="modal-btn cancel" onclick="document.getElementById('dateModal').style.display='none'">ì·¨ì†Œ</button>
        </div>

        <div class="modal-overlay" id="eventModal">
            <div class="modal-title">ìƒˆë¡œìš´ ì¶”ì–µ ì¶”ê°€í•˜ê¸°</div>
            <input type="text" id="event-title" class="modal-input" placeholder="ì¼ì • ì´ë¦„ (ex: ì²« ì—¬í–‰)">
            <input type="date" id="event-date" class="modal-input">
            <button class="modal-btn" onclick="saveCustomEvent()">ì¼ì • ì €ì¥</button>
            <button class="modal-btn cancel" onclick="document.getElementById('eventModal').style.display='none'">ì·¨ì†Œ</button>
        </div>

        <div class="image-modal" id="imageModal">
            <img src="" id="fullImage" class="full-image">
            <div class="image-caption" id="fullCaption"></div>
            <div class="image-actions">
                <button class="action-btn" onclick="downloadImage()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
                <button class="action-btn" onclick="closeFullImage()">ë‹«ê¸°</button>
            </div>
        </div>

    </div>

    <script>
        // --- 1. ì ê¸ˆ í™”ë©´ ---
        let inputCode = ""; const correctCode = "0918"; 
        function pressKey(num) { if (inputCode.length < 4) { inputCode += num; updateDots(); if (inputCode.length === 4) setTimeout(checkCode, 200); } }
        function deleteKey() { inputCode = inputCode.slice(0, -1); updateDots(); }
        function updateDots() { for (let i = 1; i <= 4; i++) { const dot = document.getElementById('d' + i); if (i <= inputCode.length) dot.classList.add('filled'); else dot.classList.remove('filled'); } }
        function checkCode() { if (inputCode === correctCode) { document.getElementById('lockScreen').style.transform = "translateY(-100%)"; } else { const lock = document.getElementById('lockScreen'); lock.classList.add('shake'); setTimeout(() => { lock.classList.remove('shake'); inputCode = ""; updateDots(); }, 400); } }

        // --- 2. ì•± ì œì–´ ---
        function openApp(appName) { document.getElementById('app-' + appName).classList.add('open'); }
        function closeApp(appName) { document.getElementById('app-' + appName).classList.remove('open'); }

        // --- 3. D-Day ì„¤ì • ---
        function openDateModal() { document.getElementById('dateModal').style.display = 'flex'; }
        function saveDDay() {
            const dateVal = document.getElementById('input-date').value;
            if (dateVal) {
                localStorage.setItem('kairo_meet_date', dateVal);
                calculateDDay(dateVal);
                renderCalendar(); 
                document.getElementById('dateModal').style.display = 'none';
            }
        }
        function calculateDDay(dateStr) {
            const start = new Date(dateStr).getTime();
            const now = new Date().getTime();
            const gap = now - start;
            const day = Math.floor(gap / (1000 * 60 * 60 * 24)) + 1; 
            document.getElementById('dday-display').innerText = day > 0 ? "D + " + day : "D - " + Math.abs(day);
            document.querySelector('.dd-sub').innerText = dateStr + " ë¶€í„° ì‚¬ë‘í•˜ëŠ” ì¤‘";
        }

        // --- 4. ìº˜ë¦°ë” (ì»¤ìŠ¤í…€ ì¼ì • í¬í•¨) ---
        function openEventModal() { document.getElementById('eventModal').style.display = 'flex'; }
        
        function saveCustomEvent() {
            const title = document.getElementById('event-title').value;
            const date = document.getElementById('event-date').value;
            if(!title || !date) { alert('ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }

            const customEvents = JSON.parse(localStorage.getItem('kairo_custom_events')) || [];
            customEvents.push({ title: title, date: date });
            localStorage.setItem('kairo_custom_events', JSON.stringify(customEvents));
            
            renderCalendar();
            document.getElementById('eventModal').style.display = 'none';
            document.getElementById('event-title').value = '';
            document.getElementById('event-date').value = '';
        }

        function renderCalendar() {
            const dateStr = localStorage.getItem('kairo_meet_date');
            const container = document.getElementById('calendar-list');
            
            if(!dateStr) {
                container.innerHTML = '<div style="text-align:center; padding:20px; color:#999; font-size:13px;">í™ˆ í™”ë©´ ìœ„ì ¯ì—ì„œ<br>ë‚ ì§œë¥¼ ë¨¼ì € ì„¤ì •í•´ì£¼ì„¸ìš”!</div>';
                return;
            }

            const startDate = new Date(dateStr);
            const now = new Date(); now.setHours(0,0,0,0);
            const events = [];

            // A. ìë™ ìƒì„± ê¸°ë…ì¼
            const dayMilestones = [100, 200, 300, 400, 500, 600, 700, 800, 900, 1000];
            dayMilestones.forEach(d => {
                let target = new Date(startDate);
                target.setDate(startDate.getDate() + d - 1);
                events.push({ date: target, title: `${d}ì¼`, type: 'milestone' });
            });

            // B. ì£¼ë…„
            for(let i=1; i<=5; i++) {
                let target = new Date(startDate);
                target.setFullYear(startDate.getFullYear() + i);
                let title = `${i}ì£¼ë…„`;
                if(i===1) title = "â­ 1ì£¼ë…„";
                if(i===2) title = "â­â­ 2ì£¼ë…„";
                events.push({ date: target, title: title, type: 'milestone', isYear: true });
            }

            // C. ë°˜ë³µ ê¸°ë…ì¼
            const recurringEvents = [
                { name: "ğŸ‚ ë¦¬í”Œë¦¬ ìƒì¼", month: 9, day: 18, type: "ripley-bd" },
                { name: "ìƒì¼", month: 8, day: 16, type: "kairo-bd" },
                { name: "ë°œë Œíƒ€ì¸ë°ì´ ğŸ«", month: 2, day: 14, type: "love-day" },
                { name: "í™”ì´íŠ¸ë°ì´ ğŸ­", month: 3, day: 14, type: "love-day" }
            ];
            const currentYear = now.getFullYear();
            [currentYear, currentYear+1].forEach(year => {
                recurringEvents.forEach(ev => {
                    let target = new Date(year, ev.month - 1, ev.day);
                    events.push({ date: target, title: ev.name, type: ev.type });
                });
            });

            // D. ì‚¬ìš©ì ì¶”ê°€ ì»¤ìŠ¤í…€ ì¼ì •
            const customEvents = JSON.parse(localStorage.getItem('kairo_custom_events')) || [];
            customEvents.forEach(ev => {
                let target = new Date(ev.date);
                events.push({ date: target, title: ev.title, type: 'custom-event' });
            });

            // ì •ë ¬
            events.sort((a, b) => a.date - b.date);

            // ë Œë”ë§
            let html = '';
            events.forEach(ev => {
                const week = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
                const dayOfWeek = week[ev.date.getDay()];
                const dateString = `${ev.date.getFullYear()}.${(ev.date.getMonth()+1).toString().padStart(2,'0')}.${ev.date.getDate().toString().padStart(2,'0')} (${dayOfWeek})`;
                
                const diffTime = ev.date - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                let dDayBadge = "";
                if(diffDays < 0) dDayBadge = `<span class="cal-dday past">ì§€ë‚¨</span>`;
                else if(diffDays === 0) dDayBadge = `<span class="cal-dday today">TODAY</span>`;
                else dDayBadge = `<span class="cal-dday">D-${diffDays}</span>`;

                let itemClass = "";
                if(ev.isYear) itemClass = "milestone";
                if(ev.type === "ripley-bd") itemClass = "ripley-bd";
                if(ev.type === "kairo-bd") itemClass = "kairo-bd";
                if(ev.type === "love-day") itemClass = "love-day";
                if(ev.type === "custom-event") itemClass = "custom-event";

                html += `
                    <div class="cal-item ${itemClass}">
                        <div>
                            <div class="cal-title">${ev.title}</div>
                            <div class="cal-date">${dateString}</div>
                        </div>
                        ${dDayBadge}
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        const savedDate = localStorage.getItem('kairo_meet_date'); 
        if (savedDate) { calculateDDay(savedDate); renderCalendar(); }

        // --- 5. ì‹œê³„/ì•¨ë²”/ëª¨ë‹¬ ë“± ---
        function updateClock() { const now = new Date(); const timeStr = now.toLocaleTimeString('en-US', { hour12: false, hour: "2-digit", minute: "2-digit" }); const dateStr = now.toLocaleDateString('ko-KR', { month: 'long', day: 'numeric', weekday: 'long' }); document.getElementById('top-clock').innerText = timeStr; document.getElementById('lock-clock').innerText = timeStr; document.getElementById('lock-date').innerText = dateStr; }
        setInterval(updateClock, 1000); updateClock();

        function handleAddPhoto(input) {
            const file = input.files[0]; if (!file) return;
            if (file.size > 2 * 1024 * 1024) { alert("ìš©ëŸ‰ ì´ˆê³¼"); return; }
            const comment = prompt("ì½”ë©˜íŠ¸ ì…ë ¥:"); if (comment === null) return;
            const reader = new FileReader();
            reader.onload = function(e) { savePhoto(e.target.result, comment); };
            reader.readAsDataURL(file); input.value = '';
        }
        function savePhoto(src, cap) {
            const p = JSON.parse(localStorage.getItem('kairo_user_photos')) || []; p.push({src:src, caption:cap});
            try { localStorage.setItem('kairo_user_photos', JSON.stringify(p)); renderPhoto(src, cap); } catch(e){ alert('ìš©ëŸ‰ ë¶€ì¡±'); }
        }
        function renderPhoto(src, cap) {
            const div = document.createElement('div'); div.className='photo'; div.onclick=function(){openFullImage(src, cap);}; div.innerHTML=`<img src="${src}"><div class="photo-caption">${cap}</div>`;
            document.getElementById('gallery-container').prepend(div);
        }
        (JSON.parse(localStorage.getItem('kairo_user_photos'))||[]).forEach(p=>renderPhoto(p.src,p.caption));

        let currentImageSrc="";
        function openFullImage(src, cap) { document.getElementById('fullImage').src=src; document.getElementById('fullCaption').innerText=cap; currentImageSrc=src; document.getElementById('imageModal').style.display='flex'; }
        function closeFullImage() { document.getElementById('imageModal').style.display='none'; }
        function downloadImage() { const a=document.createElement('a'); a.href=currentImageSrc; a.download='memory.png'; a.click(); }
    </script>
</body>
</html>
